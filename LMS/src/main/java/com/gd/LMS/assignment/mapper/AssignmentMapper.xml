<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.LMS.assignment.mapper.AssignmentMapper">
	<!-- 학생과제리스트 -->
	
	<!-- 전체 과제 리스트 조회하기 -->
	<select id="selectAssignmentList" parameterType="int" resultType="com.gd.LMS.vo.Assignment">
		SELECT
			assignment_no assignmentNo, 
			opened_lec_no openedLecNo, 
			assignment_title assignmentTitle,
			assignment_content assignmentContent, 
			end_date endDate, 
			update_date updateDate, 
			create_date createDate
		FROM 
			assignment
		WHERE
			opened_lec_no = #{openedLecNo}
		ORDER BY 
			create_date DESC
	</select>
	<!-- 전체 과제 리스트 조회하기 -->


	<!-- 과제 출제하기-->
	<insert id="insertAssignment" parameterType="com.gd.LMS.vo.Assignment">
		INSERT INTO
			assignment(
				opened_lec_no, 
				assignment_title, 
				assignment_content, 
				end_date, 
				update_date, 
				create_date
				)
				VALUES (
				#{openedLecNo},
				#{assignmentTitle}, 
				#{assignmentContent},
				#{endDate},
				now(),
				now()
				)
	</insert>
	<!-- 과제 출제하기-->

	<!-- 출제한 과제 수정하기 form -->
	<select id="selectAssignmentOne" resultType="com.gd.LMS.vo.Assignment"
		parameterType="int">
		SELECT 
			assignment_no assignmentNo,  
			opened_lec_no openedLecNo,
			assignment_title assignmentTitle,
			assignment_content assignmentContent,
			end_date endDate,
			update_date	updateDate, 
			create_date createDate
		FROM 
			assignment
		WHERE
			assignment_no = #{assignmentNo}
	</select>
	<!-- 출제한 과제 수정하기 form -->

	<!-- 출제한 과제 수정하기 -->
	<update id="updateAssignment" parameterType="com.gd.LMS.vo.Assignment">
		UPDATE 
			assignment 
		SET
			assignment_title = #{assignmentTitle}, 
			assignment_content = #{assignmentContent},
			end_date = #{endDate}, 
			update_date = now()
		WHERE 
			assignment_no = #{assignmentNo}
	</update>
	<!-- 출제한 과제 수정하기 -->

	<!-- 행정용 출제한 과제 삭제하기 -->
	<delete id="deleteAssignment" parameterType="int">
		DELETE FROM assignment WHERE assignment_no = #{assignmentNo}
	</delete>
	<!-- 행정용 출제한 과제 삭제하기 -->
	
	
	<!-- 
	
	
	<select id="selectStudentAssignmentList" parameterType="map" resultType="map">
		SELECT
			a.assignment_no assignmentNo,
			a.opened_lec_no openedLecNo,
			a.assignment_title assignmentTitle,
			a.assignment_content assignmentContent,
			'N' AS assignmentDid,
			'평가전' as assignmentScore,
			a.create_date createDate
		FROM 
			assignment a,
			student_lecture l,
			student s
		WHERE
			a.opened_lec_no = l.opened_lec_no AND
			l.student_code = s.student_code AND 
			l.opened_lec_no = #{openedLecNo} AND 
			s.student_code = #{studentCode}
	</select>
	
	학생과제상세보기
	<select id="selectStudentAssignmentOne" parameterType="int" resultType="map">
		SELECT
			a.opened_lec_no openedLecNo,
			t.lecture_name lectureName,
			a.assignment_title assignmentTitle,
			a.assignment_content assignmentContent,
			a.end_date endDate
		FROM 
			assignment a,
			opened_lecture o,
			total_lecture t
		WHERE
			a.opened_lec_no = o.opened_lec_no AND
			o.lecture_code = t.lecture_code AND 
			a.assignment_no = #{assignmentNo}
	</select>
	 -->
	
	
</mapper>